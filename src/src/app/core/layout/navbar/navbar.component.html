<nav class="navbar" role="navigation" aria-label="Primary navigation">
  <div class="navbar-container">
    <!-- Logo/Brand -->
    <div class="navbar-brand" routerLink="/admin">
      <img src="assets/aspire.svg" alt="Aspire Logo" class="aspire-logo" style="height:32px;vertical-align:middle;margin-right:12px;" />
      <span class="brand-text">Operations <span class="brand-highlight">Portal</span></span>
    </div>

    <!-- Mobile Menu Toggle
    <button class="mobile-menu-toggle" (click)="toggleMobileMenu()" aria-label="Toggle menu">
      <i class="fas" [ngClass]="mobileMenuOpen ? 'fa-times' : 'fa-bars'"></i>
    </button> -->

    <!-- Navigation Links -->
    <div class="navbar-links" [class.mobile-open]="mobileMenuOpen">
      <!-- Home -->
      <a 
        routerLink="/admin" 
        routerLinkActive="active"
        [routerLinkActiveOptions]="{exact: true}"
        class="nav-link"
        aria-label="Go to Home">
        <i class="fas fa-home" aria-hidden="true"></i>
        <span>Home</span>
      </a>

      <!-- Agent -->
      <a 
        routerLink="/agent-sol" 
        routerLinkActive="active"
        class="nav-link"
        aria-label="Go to Agent Management">
        <i class="fas fa-robot" aria-hidden="true"></i>
        <span>Agent</span>
      </a>

      <!-- Context (Dropdown) -->
      <div class="nav-dropdown" 
           (mouseenter)="showDropdown('context', $event)" 
           (mouseleave)="hideDropdown('context')">
        <a class="nav-link" 
           [class.active]="isContextActive()"
           (click)="toggleDropdown('context', $event)">
          <i class="fas fa-database" aria-hidden="true"></i>
          <span>Context</span>
          <i class="fas fa-chevron-down dropdown-icon"></i>
        </a>
        <div class="dropdown-menu" 
             *ngIf="activeDropdown === 'context'"
             [style.top.px]="dropdownPosition.top"
             [style.left.px]="dropdownPosition.left">
          <a routerLink="/context/create" class="dropdown-item">
            <i class="fas fa-plus-circle"></i>
            Create Context
          </a>
          <a routerLink="/context/search" class="dropdown-item">
            <i class="fas fa-search"></i>
            Search Context
          </a>
          
          <a routerLink="/context/test-reports" class="dropdown-item">
            <i class="fas fa-file-medical-alt"></i>
            Test Reports
          </a>
          <a routerLink="/context/diagnosis" class="dropdown-item">
            <i class="fas fa-stethoscope"></i>
            Diagnosis
          </a>
          <a routerLink="/context/create-reflection" class="dropdown-item">
            <i class="fas fa-lightbulb"></i>
            Create Reflection Context
          </a>
          <a routerLink="/context/search-reflection" class="dropdown-item">
            <i class="fas fa-filter"></i>
            Search Reflection Context
          </a>
        </div>
      </div>

      <!-- User Interaction (Dropdown) -->
      <div class="nav-dropdown" 
           (mouseenter)="showDropdown('interaction', $event)" 
           (mouseleave)="hideDropdown('interaction')">
        <a class="nav-link" 
           [class.active]="isInteractionActive()"
           (click)="toggleDropdown('interaction', $event)">
          <i class="fas fa-comments" aria-hidden="true"></i>
          <span>User Interaction</span>
          <i class="fas fa-chevron-down dropdown-icon"></i>
        </a>
        <div class="dropdown-menu" 
             *ngIf="activeDropdown === 'interaction'"
             [style.top.px]="dropdownPosition.top"
             [style.left.px]="dropdownPosition.left">
          <a routerLink="/session" class="dropdown-item">
            <i class="fas fa-comments"></i>
            User Interaction
          </a>
          <a routerLink="/sentiment" class="dropdown-item">
            <i class="fas fa-chart-line"></i>
            Sentiment Analysis
          </a>
        </div>
      </div>

      <!-- Memory (Dropdown) -->
      <div class="nav-dropdown" 
           (mouseenter)="showDropdown('memory', $event)" 
           (mouseleave)="hideDropdown('memory')">
        <a class="nav-link" 
           [class.active]="isMemoryActive()"
           (click)="toggleDropdown('memory', $event)">
          <i class="fas fa-brain" aria-hidden="true"></i>
          <span>Memory</span>
          <i class="fas fa-chevron-down dropdown-icon"></i>
        </a>
        <div class="dropdown-menu" 
             *ngIf="activeDropdown === 'memory'"
             [style.top.px]="dropdownPosition.top"
             [style.left.px]="dropdownPosition.left">
          <a routerLink="/memory" class="dropdown-item">
            <i class="fas fa-database"></i>
            Memory Management
          </a>
        </div>
      </div>

      <!-- Governance (Dropdown) -->
      <div class="nav-dropdown" 
           (mouseenter)="showDropdown('governance', $event)" 
           (mouseleave)="hideDropdown('governance')">
        <a class="nav-link" 
           [class.active]="isGovernanceActive()"
           (click)="toggleDropdown('governance', $event)">
          <i class="fas fa-shield-alt" aria-hidden="true"></i>
          <span>Governance</span>
          <i class="fas fa-chevron-down dropdown-icon"></i>
        </a>
        <div class="dropdown-menu" 
             *ngIf="activeDropdown === 'governance'"
             [style.top.px]="dropdownPosition.top"
             [style.left.px]="dropdownPosition.left">
          <a routerLink="/cost-metrics" class="dropdown-item">
            <i class="fas fa-chart-bar"></i>
            Metrics - Cost and Performance
          </a>
        </div>
      </div>
    </div>

    <!-- User Info -->
    <div class="user-info">
      <i class="fas fa-user-circle" aria-hidden="true"></i>
      <span>Administrator</span>
    </div>
  </div>
</nav>